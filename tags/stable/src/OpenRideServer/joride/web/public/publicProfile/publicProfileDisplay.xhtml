<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"

      xmlns:cc="http://java.sun.com/jsf/composite">

    <body>


        <h:head> <!-- enforce UTF 8. also, header is needed for primefaces to work  -->
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        </h:head>




        <ui:composition template="/templates/navbar1Layout.xhtml">





            <ui:define name="windowTitle">
                #{msgs.title}
            </ui:define>


            <ui:define name="content">




                <!-- Determine automatically by what parameter this was called -->

                #{publicProfile.smartUpdate()}



                <!-- if the profile does not seem to exist, then do not show it-->
                <p:panel rendered="#{!publicProfile.seemsToExists()}">
                    #{msgs.publicProfileDoesNotExist}
                </p:panel>



                <!-- display data only if the publicProfile exists -->
                <p:panel
                    rendered="#{publicProfile.seemsToExists()}"
                    >

                    <h1> #{publicProfile.custNickname} </h1>

                    <p>
                        <table>
                            <tr>
                                <td class="formLabel">
                                    #{msgs.custIssmoker}
                                </td>
                                <td> : </td>
                                <td class="formInput">
                                    #{publicProfile.custIssmoker}
                                </td>
                            </tr>
                            <tr>
                                <td class="formLabel">
                                    #{msgs.custLicensedate}
                                </td>
                                <td> : </td>
                                <td class="formInput">
                                    #{publicProfile.custLicensedate}
                                </td>
                            </tr>
                        </table>

                    </p>

                    <h2>
                        #{msgs.driver} <br/>
                        <p:rating 
                            value="#{publicProfile.driverStarRating}"  
                            rendered="#{publicProfile.driverRated}"
                            readonly="true"
                            /> 
                    </h2>
                    <p>

                        <table>
                            <tr>
                                <td class="formLabel" width="45%">
                                    #{msgs.ratingsDriverRatingsAvg}
                                </td>
                                <td width="10%"> : </td>
                                <td class="formInput" width="45%">
                                    #{publicProfile.driverRatingsRatioFormatted}
                                </td>
                            </tr>

                            <tr>
                                <td class="formLabel" width="45%">
                                    #{msgs.ratingsNumberOfDriverRatings}
                                </td>
                                <td width="10%"> : </td>
                                <td class="formInput" width="45%">
                                    #{publicProfile.driverRatingsCount}
                                </td>
                            </tr>

                            <tr>
                                <td colspan="3"  class="formLabel">  
                                    <h:form>
                                        <p:commandLink action="driverRatingsDisplay" ajax="false"> 
                                            #{msgs.ratingsViewDriverRatings}     
                                        </p:commandLink> 
                                    </h:form>
                                </td>
                            </tr>


                        </table>

                    </p>
                    <p>

                        <h2>  
                            #{msgs.rider} <br/>
                            <p:rating 
                                value="#{publicProfile.riderStarRating}"  
                                rendered="#{publicProfile.riderRated}"
                                readonly="true"
                                />  
                        </h2>

                        <table>

                            <tr>
                                <td class="formLabel" width="45%">
                                    #{msgs.ratingsRiderRatingsAvg}
                                </td>
                                <td width="10%"> : </td>
                                <td class="formInput" width="45%">
                                    #{publicProfile.riderRatingsRatioFormatted}
                                </td>
                            </tr>

                            <tr>
                                <td class="formLabel" width="45%">
                                    #{msgs.ratingsNumberOfRiderRatings}
                                </td>
                                <td width="10%"> : </td>
                                <td class="formInput" width="45%">
                                    #{publicProfile.riderRatingsCount}
                                </td>
                            </tr>

                            <tr>
                                <td colspan="3"  class="formLabel">  
                                    <h:form>
                                        <p:commandLink action="riderRatingsDisplay" ajax="false"> 
                                            #{msgs.ratingsViewRiderRatings}     
                                        </p:commandLink> 
                                      </h:form>
                                </td>
                            </tr>

                        </table>

                    </p>

                </p:panel>


            </ui:define>


        </ui:composition>





    </body>
</html>
